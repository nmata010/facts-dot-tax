<FactDictionaryModule>
  <Facts>
    
    <!-- TODO: LTC premiums worksheet -->
    <Fact path="/medicalAndDentalExpenses">
      <Name>Medical and dental expenses</Name>
      <Description>Schedule A line 1. Medical and dental expenses (see instructions).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/medicalExpensesThreshold">
      <Name>Medical expenses threshold</Name>
      <Description>Schedule A line 3. Multiply line 2 (AGI) by 7.5% (0.075).</Description>
      <Derived>
        <Round>
          <Multiply>
            <Dependency path="/agi" />
            <Rational>75/1000</Rational>
          </Multiply>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/medicalExpensesDeduction">
      <Name>Medical expenses deduction</Name>
      <Description>Schedule A line 4. Subtract line 3 from line 1. If line 3 is more than line 1, enter 0.</Description>
      <Derived>
        <GreaterOf>
          <Dollar>0</Dollar>
          <Subtract>
            <Minuend><Dependency path="/medicalAndDentalExpenses" /></Minuend>
            <Subtrahends><Dependency path="/medicalExpensesThreshold" /></Subtrahends>
          </Subtract>
        </GreaterOf>
      </Derived>
    </Fact>

    <!-- TODO: support for state sales tax tables -->
    <Fact path="/saltIncomeTaxOrSalesTax">
      <Name>State and local income taxes or general sales taxes</Name>
      <Description>Schedule A line 5a. State and local income taxes or general sales taxes.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/saltRealEstateTax">
      <Name>State and local real estate taxes</Name>
      <Description>Schedule A line 5b. State and local real estate taxes.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/saltPersonalPropertyTax">
      <Name>State and local personal property taxes</Name>
      <Description>Schedule A line 5c. State and local personal property taxes.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/saltTotal">
      <Name>Total state and local taxes</Name>
      <Description>Schedule A line 5d. Add lines 5a through 5c.</Description>
      <Derived>
        <Add>
          <Dependency path="/saltIncomeTaxOrSalesTax" />
          <Dependency path="/saltRealEstateTax" />
          <Dependency path="/saltPersonalPropertyTax" />
        </Add>
      </Derived>
    </Fact>

    <!-- TODO: SALT deduction worksheet for AGI>500k (250k mfs) -->
    <Fact path="/saltDeduction">
      <Name>State and local tax deduction</Name>
      <Description>Schedule A line 5e. Enter the smaller of line 5d or $40,000 ($20,000 if married filing separately).</Description>
      <Derived>
        <LesserOf>
          <Dependency path="/saltTotal" />
          <Switch>
            <Case>
              <When>
                <Equal>
                  <Left><Dependency path="/filingStatus" /></Left>
                  <Right><Enum optionsPath="/filingStatusOptions">mfs</Enum></Right>
                </Equal>
              </When>
              <Then><Dollar>20000</Dollar></Then>
            </Case>
            <Case>
              <When><True/></When>
              <Then><Dollar>40000</Dollar></Then>
            </Case>
          </Switch>
        </LesserOf>
      </Derived>
    </Fact>

    <!-- TODO: See instructions for the list of deductible taxes (e.g., foreign taxes
         not claimed as a credit, generation-skipping transfer tax). -->
    <Fact path="/otherDeductibleTaxes">
      <Name>Other taxes</Name>
      <Description>Schedule A line 6. Other taxes. List type and amount (see instructions).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalTaxesPaid">
      <Name>Total taxes paid</Name>
      <Description>Schedule A line 7. Add lines 5e and 6.</Description>
      <Derived>
        <Add>
          <Dependency path="/saltDeduction" />
          <Dependency path="/otherDeductibleTaxes" />
        </Add>
      </Derived>
    </Fact>

    <!-- TODO: Pub 396 limits on mortgage interest -->
    <Fact path="/homeMortgageInterest1098">
      <Name>Home mortgage interest from Form 1098</Name>
      <Description>Schedule A line 8a. Home mortgage interest and points reported to you on Form 1098.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/homeMortgageInterestNot1098">
      <Name>Home mortgage interest not from Form 1098</Name>
      <Description>Schedule A line 8b. Home mortgage interest not reported to you on Form 1098.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/mortgagePoints">
      <Name>Points not reported on Form 1098</Name>
      <Description>Schedule A line 8c. Points not reported to you on Form 1098.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalHomeMortgageInterest">
      <Name>Total home mortgage interest and points</Name>
      <Description>Schedule A line 8e. Add lines 8a through 8c.</Description>
      <Derived>
        <Add>
          <Dependency path="/homeMortgageInterest1098" />
          <Dependency path="/homeMortgageInterestNot1098" />
          <Dependency path="/mortgagePoints" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/investmentInterest">
      <Name>Investment interest</Name>
      <Description>Schedule A line 9. Investment interest. Attach Form 4952 if required.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalInterestPaid">
      <Name>Total interest paid</Name>
      <Description>Schedule A line 10. Add lines 8e and 9.</Description>
      <Derived>
        <Add>
          <Dependency path="/totalHomeMortgageInterest" />
          <Dependency path="/investmentInterest" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/charityCash">
      <Name>Gifts by cash or check</Name>
      <Description>Schedule A line 11. Gifts by cash or check.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/charityNonCash">
      <Name>Gifts other than cash or check</Name>
      <Description>Schedule A line 12. Other than by cash or check.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/charityCarryover">
      <Name>Charity carryover from prior year</Name>
      <Description>Schedule A line 13. Carryover from prior year.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: agi limits on charity. -->
    <Fact path="/totalCharityGifts">
      <Name>Total gifts to charity</Name>
      <Description>Schedule A line 14. Add lines 11 through 13.</Description>
      <Derived>
        <Add>
          <Dependency path="/charityCash" />
          <Dependency path="/charityNonCash" />
          <Dependency path="/charityCarryover" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/casualtyAndTheftLosses">
      <Name>Casualty and theft losses</Name>
      <Description>Schedule A line 15. Casualty and theft loss(es) from a federally declared disaster.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/otherItemizedDeductions">
      <Name>Other itemized deductions</Name>
      <Description>Schedule A line 16. Other itemized deductions from list in instructions.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalItemizedDeductions">
      <Name>Total itemized deductions</Name>
      <Description>Schedule A line 17. Add the amounts in the far right column for lines 4 through 16.</Description>
      <Derived>
        <Add>
          <Dependency path="/medicalExpensesDeduction" />
          <Dependency path="/totalTaxesPaid" />
          <Dependency path="/totalInterestPaid" />
          <Dependency path="/totalCharityGifts" />
          <Dependency path="/casualtyAndTheftLosses" />
          <Dependency path="/otherItemizedDeductions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/electToItemize">
      <Name>Elect to itemize</Name>
      <Description>Schedule A line 18. Check if you elect to itemize deductions even though they are less than your standard deduction.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

  </Facts>
</FactDictionaryModule>
