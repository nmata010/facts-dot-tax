<FactDictionaryModule>
  <Facts>

    <!-- Filing status -->

    <Fact path="/filingStatusOptions">
      <Derived>
        <EnumOptions>
          <String>single</String>
          <String>mfj</String>
          <String>hoh</String>
          <String>mfs</String>
          <String>qss</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/filingStatus">
      <Name>Filing Status</Name>
      <Description>Form 1040 filing status</Description>
      <Writable>
        <Enum optionsPath="/filingStatusOptions"/>
      </Writable>
    </Fact>

    <!-- Income -->

    <Fact path="/wagesFromW2">
      <Name>Wages from W-2</Name>
      <Description>Form 1040 line 1a. Total amount from Form(s) W-2, box 1.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/householdEmployeeWages">
      <Name>Household employee wages</Name>
      <Description>Form 1040 line 1b. Household employee wages not reported on Form(s) W-2.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/unreportedTipIncome">
      <Name>Tip income</Name>
      <Description>Form 1040 line 1c. Tip income not reported on line 1a.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/medicaidWaiverPayments">
      <Name>Medicaid waiver payments</Name>
      <Description>Form 1040 line 1d. Medicaid waiver payments not reported on Form(s) W-2, box 1.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/taxableDependentCareBenefits">
      <Name>Dependent care benefits</Name>
      <Description>Form 1040 line 1e. Taxable dependent care benefits from Form 2441, line 26.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/employerAdoptionBenefits">
      <Name>Adoption benefits</Name>
      <Description>Form 1040 line 1f. Employer-provided adoption benefits from Form 8839, line 31.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/wagesFrom8919">
      <Name>Form 8919 wages</Name>
      <Description>Form 1040 line 1g. Wages from Form 8919, line 6.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/otherEarnedIncome">
      <Name>Other earned income</Name>
      <Description>Form 1040 line 1h. Strike benefits, excess deferrals, disability pensions, etc.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/nontaxableCombatPay">
      <Name>Nontaxable combat pay election</Name>
      <Description>Form 1040 line 1i. Nontaxable combat pay election (for EIC purposes only).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalWages">
      <Name>Total wages</Name>
      <Description>Form 1040 line 1z. Add lines 1a through 1h.</Description>
      <Derived>
        <Add>
          <Dependency path="/wagesFromW2" />
          <Dependency path="/householdEmployeeWages" />
          <Dependency path="/unreportedTipIncome" />
          <Dependency path="/medicaidWaiverPayments" />
          <Dependency path="/taxableDependentCareBenefits" />
          <Dependency path="/employerAdoptionBenefits" />
          <Dependency path="/wagesFrom8919" />
          <Dependency path="/otherEarnedIncome" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/taxExemptInterest">
      <Name>Tax-exempt interest</Name>
      <Description>Form 1040 line 2a. Tax-exempt interest (informational).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/taxableInterest">
      <Name>Taxable interest</Name>
      <Description>Form 1040 line 2b. Taxable interest.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/qualifiedDividends">
      <Name>Qualified dividends</Name>
      <Description>Form 1040 line 3a. Qualified dividends.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/ordinaryDividends">
      <Name>Ordinary dividends</Name>
      <Description>Form 1040 line 3b. Ordinary dividends.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/iraDistributions">
      <Name>IRA distributions</Name>
      <Description>Form 1040 line 4a. IRA distributions (total).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/taxableIraDistributions">
      <Name>IRA distributions (taxable)</Name>
      <Description>Form 1040 line 4b. IRA distributions (taxable amount).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/pensionsAndAnnuities">
      <Name>Pensions and annuities</Name>
      <Description>Form 1040 line 5a. Pensions and annuities (total).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/taxablePensionsAndAnnuities">
      <Name>Pensions and annuities (taxable)</Name>
      <Description>Form 1040 line 5b. Pensions and annuities (taxable amount).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/socialSecurityBenefits">
      <Name>Social security benefits</Name>
      <Description>Form 1040 line 6a. Social security benefits (total).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/taxableSocialSecurityBenefits">
      <Name>Social security benefits (taxable)</Name>
      <Description>Form 1040 line 6b. Taxable social security benefits (from worksheet).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/capitalGainOrLoss">
      <Name>Capital gain or loss</Name>
      <Description>Form 1040 line 7a. Capital gain or (loss) from Schedule D or Form 1099-DIV.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/otherIncomeWritable">
      <Name>Other income (manual)</Name>
      <Description>Form 1040 line 8. Other income, manually entered when Schedule 1 is not used.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/otherIncomeDerived">
      <Name>Other income (from Schedule 1)</Name>
      <Description>Form 1040 line 8. Other income derived from Schedule 1, line 10.</Description>
      <Derived>
        <Dependency path="/additionalIncome" />
      </Derived>
    </Fact>

    <Fact path="/hasSch1OtherIncome">
      <Name>Has Schedule 1 other income</Name>
      <Description>True when Schedule 1 additional income is greater than zero.</Description>
      <Derived>
        <GreaterThan>
          <Left><Dependency path="/additionalIncome" /></Left>
          <Right><Dollar>0</Dollar></Right>
        </GreaterThan>
      </Derived>
    </Fact>

    <Fact path="/otherIncome">
      <Name>Other income</Name>
      <Description>Form 1040 line 8. Other income from Schedule 1, line 10.</Description>
      <Derived>
        <Switch>
          <Case>
            <When><Dependency path="/hasSch1OtherIncome" /></When>
            <Then><Dependency path="/otherIncomeDerived" /></Then>
          </Case>
          <Case>
            <When><True/></When>
            <Then><Dependency path="/otherIncomeWritable" /></Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/totalIncome">
      <Name>Total income</Name>
      <Description>Form 1040 line 9. Add lines 1z, 2b, 3b, 4b, 5b, 6b, 7a, and 8.</Description>
      <Derived>
        <Add>
          <Dependency path="/totalWages" />
          <Dependency path="/taxableInterest" />
          <Dependency path="/ordinaryDividends" />
          <Dependency path="/taxableIraDistributions" />
          <Dependency path="/taxablePensionsAndAnnuities" />
          <Dependency path="/taxableSocialSecurityBenefits" />
          <Dependency path="/capitalGainOrLoss" />
          <Dependency path="/otherIncome" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/adjustmentsToIncomeWritable">
      <Name>Adjustments to income (manual)</Name>
      <Description>Form 1040 line 10. Adjustments to income, manually entered when Schedule 1 is not used.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/adjustmentsToIncomeDerived">
      <Name>Adjustments to income (from Schedule 1)</Name>
      <Description>Form 1040 line 10. Adjustments to income derived from Schedule 1, line 26.</Description>
      <Derived>
        <Dependency path="/totalAdjustments" />
      </Derived>
    </Fact>

    <Fact path="/hasSch1Adjustments">
      <Name>Has Schedule 1 adjustments</Name>
      <Description>True when Schedule 1 total adjustments is greater than zero.</Description>
      <Derived>
        <GreaterThan>
          <Left><Dependency path="/totalAdjustments" /></Left>
          <Right><Dollar>0</Dollar></Right>
        </GreaterThan>
      </Derived>
    </Fact>

    <Fact path="/adjustmentsToIncome">
      <Name>Adjustments to income</Name>
      <Description>Form 1040 line 10. Adjustments to income from Schedule 1, line 26.</Description>
      <Derived>
        <Switch>
          <Case>
            <When><Dependency path="/hasSch1Adjustments" /></When>
            <Then><Dependency path="/adjustmentsToIncomeDerived" /></Then>
          </Case>
          <Case>
            <When><True/></When>
            <Then><Dependency path="/adjustmentsToIncomeWritable" /></Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/agi">
      <Name>Adjusted gross income</Name>
      <Description>Form 1040 line 11. Subtract line 10 from line 9.</Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/totalIncome" />
          </Minuend>
          <Subtrahends>
            <Dependency path="/adjustmentsToIncome" />
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>

    <!-- Tax and Credits -->

    <Fact path="/filerBornBefore1961">
      <Name>Filer born before January 2, 1961</Name>
      <Description>Form 1040 line 12d. Check if the filer was born before January 2, 1961.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <Fact path="/filerBlind">
      <Name>Filer is blind</Name>
      <Description>Form 1040 line 12d. Check if the filer was blind at the end of the tax year.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <Fact path="/spouseBornBefore1961">
      <Name>Spouse born before January 2, 1961</Name>
      <Description>Form 1040 line 12d. Check if the spouse was born before January 2, 1961.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <Fact path="/spouseBlind">
      <Name>Spouse is blind</Name>
      <Description>Form 1040 line 12d. Check if the spouse was blind at the end of the tax year.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <Fact path="/additionalDeductionBoxCount">
      <Name>Additional deduction box count</Name>
      <Description>Number of boxes checked on Form 1040 line 12d (age/blindness).</Description>
      <Derived>
        <Add>
          <Switch>
            <Case>
              <When><Dependency path="/filerBornBefore1961" /></When>
              <Then><Int>1</Int></Then>
            </Case>
            <Case>
              <When><True/></When>
              <Then><Int>0</Int></Then>
            </Case>
          </Switch>
          <Switch>
            <Case>
              <When><Dependency path="/filerBlind" /></When>
              <Then><Int>1</Int></Then>
            </Case>
            <Case>
              <When><True/></When>
              <Then><Int>0</Int></Then>
            </Case>
          </Switch>
          <Switch>
            <Case>
              <When><Dependency path="/spouseBornBefore1961" /></When>
              <Then><Int>1</Int></Then>
            </Case>
            <Case>
              <When><True/></When>
              <Then><Int>0</Int></Then>
            </Case>
          </Switch>
          <Switch>
            <Case>
              <When><Dependency path="/spouseBlind" /></When>
              <Then><Int>1</Int></Then>
            </Case>
            <Case>
              <When><True/></When>
              <Then><Int>0</Int></Then>
            </Case>
          </Switch>
        </Add>
      </Derived>
    </Fact>

    <Fact path="/standardDeductionBase">
      <Name>Standard deduction base amount</Name>
      <Description>Base standard deduction amount by filing status (TY2025).</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">single</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>15750</Dollar></Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">mfj</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>31500</Dollar></Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">hoh</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>23625</Dollar></Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">mfs</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>15750</Dollar></Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">qss</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>31500</Dollar></Then>
          </Case>
          <Case>
            <When><True/></When>
            <Then><Dollar>0</Dollar></Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/additionalDeductionPerBox">
      <Name>Additional deduction per box</Name>
      <Description>Additional standard deduction amount per checked box on line 12d. $2,000 for single/HOH, $1,600 for MFJ/MFS/QSS.</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">single</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>2000</Dollar></Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left><Dependency path="/filingStatus" /></Left>
                <Right><Enum optionsPath="/filingStatusOptions">hoh</Enum></Right>
              </Equal>
            </When>
            <Then><Dollar>2000</Dollar></Then>
          </Case>
          <Case>
            <When><True/></When>
            <Then><Dollar>1600</Dollar></Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/additionalDeductionTotal">
      <Name>Additional standard deduction total</Name>
      <Description>Total additional standard deduction for age/blindness.</Description>
      <Derived>
        <Multiply>
          <Dependency path="/additionalDeductionPerBox" />
          <Dependency path="/additionalDeductionBoxCount" />
        </Multiply>
      </Derived>
    </Fact>

    <Fact path="/standardDeduction">
      <Name>Standard deduction</Name>
      <Description>Standard deduction (base amount plus additional for age/blindness).</Description>
      <Derived>
        <Add>
          <Dependency path="/standardDeductionBase" />
          <Dependency path="/additionalDeductionTotal" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/standardOrItemizedDeduction">
      <Name>Standard or itemized deduction</Name>
      <Description>Form 1040 line 12e. The greater of standard deduction or total itemized deductions, unless the filer elects to itemize.</Description>
      <Derived>
        <Switch>
          <Case>
            <When><Dependency path="/electToItemize" /></When>
            <Then><Dependency path="/totalItemizedDeductions" /></Then>
          </Case>
          <Case>
            <When><True/></When>
            <Then>
              <GreaterOf>
                <Dependency path="/standardDeduction" />
                <Dependency path="/totalItemizedDeductions" />
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <!-- TODO: derive from f8995 -->
    <Fact path="/qbiDeduction">
      <Name>Qualified business income deduction</Name>
      <Description>Form 1040 line 13a. Qualified business income deduction from Form 8995 or 8995-A.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from f8995 -->
    <Fact path="/additionalDeductions">
      <Name>Additional deductions</Name>
      <Description>Form 1040 line 13b. Additional deductions from Schedule 1-A, line 38.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalDeductions">
      <Name>Total deductions</Name>
      <Description>Form 1040 line 14. Add lines 12e, 13a, and 13b.</Description>
      <Derived>
        <Add>
          <Dependency path="/standardOrItemizedDeduction" />
          <Dependency path="/qbiDeduction" />
          <Dependency path="/additionalDeductions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/taxableIncome">
      <Name>Taxable income</Name>
      <Description>Form 1040 line 15. Subtract line 14 from line 11. If zero or less, enter 0.</Description>
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency path="/agi" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/totalDeductions" />
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>
    
    <!-- Tax table rounding: income < $100k uses IRS tax table midpoints -->
    <Fact path="/roundedTaxableIncome">
      <Name>Rounded taxable income</Name>
      <Description>Income less than $100,000 uses the tax tables from the Instructions for Form 1040.
        This fact selects the midpoint that corresponds to each entry in the tax tables.</Description>
      <Derived>
        <Switch>
          <!-- No tax if no taxable income -->
          <Case>
            <When>
              <LessThanOrEqual>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>0</Dollar></Right>
              </LessThanOrEqual>
            </When>
            <Then><Dollar>0</Dollar></Then>
          </Case>
          <!-- Hardcoded midpoints for income less than $25 -->
          <Case>
            <When>
              <LessThan>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>5</Dollar></Right>
              </LessThan>
            </When>
            <Then><Dollar>2.50</Dollar></Then>
          </Case>
          <Case>
            <When>
              <LessThan>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>15</Dollar></Right>
              </LessThan>
            </When>
            <Then><Dollar>10</Dollar></Then>
          </Case>
          <Case>
            <When>
              <LessThan>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>25</Dollar></Right>
              </LessThan>
            </When>
            <Then><Dollar>20</Dollar></Then>
          </Case>
          <!-- $25 increments for income between $25 and $3,000 -->
          <Case>
            <When>
              <LessThan>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>3000</Dollar></Right>
              </LessThan>
            </When>
            <Then>
              <Add>
                <StepwiseMultiply>
                  <Multiplicand><Dependency path="/taxableIncome" /></Multiplicand>
                  <Rate><Rational>25/25</Rational></Rate>
                </StepwiseMultiply>
                <Dollar>12.50</Dollar>
              </Add>
            </Then>
          </Case>
          <!-- $50 increments for income between $3,000 and $100,000 -->
          <Case>
            <When>
              <LessThan>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>100000</Dollar></Right>
              </LessThan>
            </When>
            <Then>
              <Add>
                <StepwiseMultiply>
                  <Multiplicand><Dependency path="/taxableIncome" /></Multiplicand>
                  <Rate><Rational>50/50</Rational></Rate>
                </StepwiseMultiply>
                <Dollar>25</Dollar>
              </Add>
            </Then>
          </Case>
          <!-- $100,000+ uses exact taxable income (tax computation worksheet) -->
          <Case>
            <When>
              <GreaterThanOrEqual>
                <Left><Dependency path="/taxableIncome" /></Left>
                <Right><Dollar>100000</Dollar></Right>
              </GreaterThanOrEqual>
            </When>
            <Then><Dependency path="/taxableIncome" /></Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <!-- Line 16: Tax from tax tables / tax computation worksheet -->
    <!-- TY2025 brackets per Rev Proc 2024-40 -->
    <!-- TODO: tax on qualified dividend and long term cap gains (QDCG Tax Worksheet)  -->
    <Fact path="/tax">
      <Name>Tax</Name>
      <Description>Form 1040 line 16. Tax from tax table or tax computation worksheet.</Description>
      <Derived>
        <Round>
          <Switch>

            <!-- MARRIED FILING JOINTLY / QUALIFYING SURVIVING SPOUSE -->
            <Case>
              <When>
                <Any>
                  <Equal>
                    <Left><Dependency path="/filingStatus" /></Left>
                    <Right><Enum optionsPath="/filingStatusOptions">mfj</Enum></Right>
                  </Equal>
                  <Equal>
                    <Left><Dependency path="/filingStatus" /></Left>
                    <Right><Enum optionsPath="/filingStatusOptions">qss</Enum></Right>
                  </Equal>
                </Any>
              </When>
              <Then>
                <Switch>
                  <!-- Not over $23,850: 10% -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>23850</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>
                  <!-- Over $23,850 but not over $96,950: $2,385 + 12% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>96950</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>2385</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>23850</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $96,950 but not over $206,700: $11,157 + 22% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>206700</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>11157</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>96950</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $206,700 but not over $394,600: $35,302 + 24% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>394600</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>35302</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>206700</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $394,600 but not over $501,050: $80,398 + 32% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>501050</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>80398</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>394600</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $501,050 but not over $751,600: $114,462 + 35% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>751600</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>114462</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>501050</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $751,600: $202,154.50 + 37% of excess -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>751600</Dollar></Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>202154.50</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>751600</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- HEAD OF HOUSEHOLD -->
            <Case>
              <When>
                <Equal>
                  <Left><Dependency path="/filingStatus" /></Left>
                  <Right><Enum optionsPath="/filingStatusOptions">hoh</Enum></Right>
                </Equal>
              </When>
              <Then>
                <Switch>
                  <!-- Not over $17,000: 10% -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>17000</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>
                  <!-- Over $17,000 but not over $64,850: $1,700 + 12% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>64850</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1700</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>17000</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $64,850 but not over $103,350: $7,442 + 22% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>103350</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>7442</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>64850</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $103,350 but not over $197,300: $15,912 + 24% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>197300</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>15912</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>103350</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $197,300 but not over $250,500: $38,460 + 32% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>250500</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>38460</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>197300</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $250,500 but not over $626,350: $55,484 + 35% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>626350</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>55484</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>250500</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $626,350: $187,031.50 + 37% of excess -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>626350</Dollar></Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>187031.50</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>626350</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- SINGLE -->
            <Case>
              <When>
                <Equal>
                  <Left><Dependency path="/filingStatus" /></Left>
                  <Right><Enum optionsPath="/filingStatusOptions">single</Enum></Right>
                </Equal>
              </When>
              <Then>
                <Switch>
                  <!-- Not over $11,925: 10% -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>11925</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>
                  <!-- Over $11,925 but not over $48,475: $1,192.50 + 12% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>48475</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1192.50</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>11925</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $48,475 but not over $103,350: $5,578.50 + 22% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>103350</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>5578.50</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>48475</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $103,350 but not over $197,300: $17,651 + 24% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>197300</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>17651</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>103350</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $197,300 but not over $250,525: $40,199 + 32% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>250525</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>40199</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>197300</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $250,525 but not over $626,350: $57,231 + 35% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>626350</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>57231</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>250525</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $626,350: $188,769.75 + 37% of excess -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>626350</Dollar></Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>188769.75</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>626350</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

            <!-- MARRIED FILING SEPARATELY -->
            <Case>
              <When>
                <Equal>
                  <Left><Dependency path="/filingStatus" /></Left>
                  <Right><Enum optionsPath="/filingStatusOptions">mfs</Enum></Right>
                </Equal>
              </When>
              <Then>
                <Switch>
                  <!-- Not over $11,925: 10% -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>11925</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Multiply>
                        <Rational>10/100</Rational>
                        <Dependency path="/roundedTaxableIncome" />
                      </Multiply>
                    </Then>
                  </Case>
                  <!-- Over $11,925 but not over $48,475: $1,192.50 + 12% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>48475</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>1192.50</Dollar>
                        <Multiply>
                          <Rational>12/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>11925</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $48,475 but not over $103,350: $5,578.50 + 22% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>103350</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>5578.50</Dollar>
                        <Multiply>
                          <Rational>22/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>48475</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $103,350 but not over $197,300: $17,651 + 24% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>197300</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>17651</Dollar>
                        <Multiply>
                          <Rational>24/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>103350</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $197,300 but not over $250,525: $40,199 + 32% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>250525</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>40199</Dollar>
                        <Multiply>
                          <Rational>32/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>197300</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $250,525 but not over $375,800: $57,231 + 35% of excess -->
                  <Case>
                    <When>
                      <LessThanOrEqual>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>375800</Dollar></Right>
                      </LessThanOrEqual>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>57231</Dollar>
                        <Multiply>
                          <Rational>35/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>250525</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                  <!-- Over $375,800: $101,077.25 + 37% of excess -->
                  <Case>
                    <When>
                      <GreaterThan>
                        <Left><Dependency path="/roundedTaxableIncome" /></Left>
                        <Right><Dollar>375800</Dollar></Right>
                      </GreaterThan>
                    </When>
                    <Then>
                      <Add>
                        <Dollar>101077.25</Dollar>
                        <Multiply>
                          <Rational>37/100</Rational>
                          <Subtract>
                            <Minuend><Dependency path="/roundedTaxableIncome" /></Minuend>
                            <Subtrahends><Dollar>375800</Dollar></Subtrahends>
                          </Subtract>
                        </Multiply>
                      </Add>
                    </Then>
                  </Case>
                </Switch>
              </Then>
            </Case>

          </Switch>
        </Round>
      </Derived>
    </Fact>
    
    <!-- TODO: derive from schedule 2 part 1 -->
    <Fact path="/additionalTax">
      <Name>Additional taxes</Name>
      <Description>Form 1040 line 17. Additional taxes (e.g., self-employment tax) from Schedule 2 Line 3.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/tentativeTax">
      <Name>Tentative tax</Name>
      <Description>Form 1040 line 18. Tax on wages (line 16) plus Additional tax from Schedule 2, Line 3 (Line 17).</Description>
      <Derived>
        <Add>
          <Dependency path="/tax" />
          <Dependency path="/additionalTax" />
        </Add>
      </Derived>
    </Fact>

    <!-- TODO: derive from schedule 8812 -->
    <Fact path="/ctcOdcCredit">
      <Name>Child tax credit or ODC credit</Name>
      <Description>Form 1040 line 19. Child tax credit or ODC credit from Schedule 8812.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from schedule 3 -->
    <Fact path="/schedule3NonRefundableCredits">
      <Name>Schedule 3 non-refundable credits</Name>
      <Description>Form 1040 line 20. Non-refundable credits from Schedule 3.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalNonRefundableCredits">
      <Name>Total non-refundable credits</Name>
      <Description>Form 1040 line 21. Total non-refundable credits (line 19 + line 20).</Description>
      <Derived>
        <Add>
          <Dependency path="/ctcOdcCredit" />
          <Dependency path="/schedule3NonRefundableCredits" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/tentativeTaxNetOfNonRefundableCredits">
      <Name>Total tax net of non-refundable credits</Name>
      <Description>Form 1040 line 22. Tentative tax (line 18) minus total non-refundable credits (line 21).</Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/tentativeTax" />
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalNonRefundableCredits" />
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>   

    <!-- TODO: derive from Schedule 2 part 2 -->
    <Fact path="/otherTaxes">
      <Name>Other taxes</Name>
      <Description>Form 1040 line 23. Other taxes from Schedule 2, Line 21</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalTax">
      <Name>Total tax</Name>
      <Description>Form 1040 line 24. Tentative tax net of non-refundable credits plus other taxes .</Description>
      <Derived>
        <Add>
          <Dependency path="/tentativeTaxNetOfNonRefundableCredits" />
          <Dependency path="/otherTaxes" />
        </Add>
      </Derived>
    </Fact>    

    <!-- Payments and Refundable Credits -->

    <!-- TODO: derive from w2s -->
    <Fact path="/withholdingsW2">
      <Name>Federal tax withheld from W-2s</Name>
      <Description>Form 1040 line 25a. Federal income tax withheld from Form(s) W-2, box 2.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from 1099s -->
    <Fact path="/withholdings1099">
      <Name>Federal tax withheld from 1099s</Name>
      <Description>Form 1040 line 25b. Federal income tax withheld from Form(s) 1099.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/withholdingsOther">
      <Name>Other withholding</Name>
      <Description>Form 1040 line 25c. Other forms of federal income tax withheld.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalWithholdings">
      <Name>Total federal tax withholdings from all sources</Name>
      <Description>Form 1040 line 25d. Total withholdings from all sources (W-2s, 1099s, and other).</Description>
      <Derived>
        <Add>
          <Dependency path="/withholdingsW2" />
          <Dependency path="/withholdings1099" />
          <Dependency path="/withholdingsOther" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/estimatedTaxPayments">
      <Name>Estimated tax payments</Name>
      <Description>Form 1040 line 26. 2025 estimated tax payments and amount applied from 2024 return.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from EIC worksheet -->
    <Fact path="/earnedIncomeCredit">
      <Name>Earned income credit</Name>
      <Description>Form 1040 line 27a. Earned income credit (EIC).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: update tax calculations based on selection -->
    <Fact path="/eicClergy">
      <Name>EIC clergy checkbox</Name>
      <Description>Form 1040 line 27b. Clergy filing Schedule SE.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <!-- TODO: update tax calculations based on selection -->
    <Fact path="/eicOptOut">
      <Name>EIC opt-out checkbox</Name>
      <Description>Form 1040 line 27c. Check if you do not want to claim the EIC.</Description>
      <Writable>
        <Boolean/>
      </Writable>
    </Fact>

    <!-- TODO: derive from Schedule 8812 -->
    <Fact path="/additionalChildTaxCredit">
      <Name>Additional child tax credit</Name>
      <Description>Form 1040 line 28. Additional child tax credit (ACTC) from Schedule 8812.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from Form 8863 -->
    <Fact path="/americanOpportunityTaxCredit">
      <Name>American opportunity Tax credit</Name>
      <Description>Form 1040 line 29. American opportunity tax credit from Form 8863, line 8.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from Form 8839 -->
    <Fact path="/refundableAdoptionCredit">
      <Name>Refundable adoption credit</Name>
      <Description>Form 1040 line 30. Refundable adoption credit from Form 8839, line 13.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- TODO: derive from Schedule 3 -->
    <Fact path="/schedule3RefundableCredits">
      <Name>Refundable credits (Schedule 3)</Name>
      <Description>Form 1040 line 31. Amount from Schedule 3, line 15.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/totalOtherPaymentsAndRefundableCredits">
      <Name>Total other payments and refundable credits</Name>
      <Description>Form 1040 line 32. Add lines 27a, 28, 29, 30, and 31.</Description>
      <Derived>
        <Add>
          <Dependency path="/earnedIncomeCredit" />
          <Dependency path="/additionalChildTaxCredit" />
          <Dependency path="/americanOpportunityTaxCredit" />
          <Dependency path="/refundableAdoptionCredit" />
          <Dependency path="/schedule3RefundableCredits" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/totalPayments">
      <Name>Total payments</Name>
      <Description>Form 1040 line 33. Add lines 25d, 26, and 32. These are your total payments.</Description>
      <Derived>
        <Add>
          <Dependency path="/totalWithholdings" />
          <Dependency path="/estimatedTaxPayments" />
          <Dependency path="/totalOtherPaymentsAndRefundableCredits" />
        </Add>
      </Derived>
    </Fact>

    <!-- Refund -->

    <Fact path="/overpaymentAmount">
      <Name>Amount overpaid</Name>
      <Description>Form 1040 line 34. If line 33 is more than line 24, subtract line 24 from line 33.</Description>
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency path="/totalPayments" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/totalTax" />
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/refundAmount">
      <Name>Refund amount</Name>
      <Description>Form 1040 line 35a. Amount of line 34 you want refunded to you.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <Fact path="/appliedToNextYear">
      <Name>Applied to 2026 estimated tax</Name>
      <Description>Form 1040 line 36. Amount of line 34 you want applied to your 2026 estimated tax.</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

    <!-- Amount You Owe -->

    <Fact path="/amountYouOwe">
      <Name>Amount you owe</Name>
      <Description>Form 1040 line 37. If line 24 is more than line 33, subtract line 33 from line 24.</Description>
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency path="/totalTax" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/totalPayments" />
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/estimatedTaxPenalty">
      <Name>Estimated tax penalty</Name>
      <Description>Form 1040 line 38. Estimated tax penalty (see instructions).</Description>
      <Writable>
        <Dollar/>
      </Writable>
    </Fact>

  </Facts>
</FactDictionaryModule>
